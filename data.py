import os
import xml.etree.ElementTree as ET
import pandas as pd
ar = {}
my_list = os.listdir('C:/Users/palak/PycharmProjects/test/normal')
list = []
for i in my_list:
    if(i.endswith('.apk')):
        continue
    else:
        list.append(i)

import csv

df = pd.read_csv("data.csv")



for i in list:
    filepath = f"C:/Users/palak/PycharmProjects/test/normal/{i}/AndroidManifest.xml"
    root = ET.parse(filepath).getroot()
    permissions = root.findall("uses-permission")
    a = []
    for perm in permissions:
        for att in perm.attrib:
            k = perm.attrib[att]

            if k.startswith("android.permission"):
                per = k[19:]
                if per in a:
                    continue
                else:
                    df.at[j,per]="Yes"

                    if per in ar:
                        ar[per]+=1
                    else:
                        ar[per]=1
                    a.append(per)


df = pd.read_csv("data.csv")
for i in ar:
    df.at[0,i]=ar[i]

df.to_csv("fdata.csv")
print(df.head())
